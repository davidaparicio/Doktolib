# AWS Configuration
aws_region = "us-east-1"

# Aurora Cluster Configuration
cluster_name  = "doktolib-aurora"
database_name = "doktolib"
master_username = "postgres"

# PostgreSQL Version
# Supported versions: "13.12", "14.9", "15.5", "16.1"
engine_version = "17.6"

# Serverless v2 Scaling Configuration
# 1 ACU â‰ˆ 2GB RAM
# Min: 0.5, Max: 128
min_capacity = 0.5  # Scales down to 0.5 ACU during low traffic
max_capacity = 2    # Scales up to 2 ACU during high traffic

# High Availability
# 1 = Single instance (development)
# 2+ = Multi-AZ with read replicas (production)
instance_count = 1

# Network Configuration
use_default_vpc = true  # Set to false to use custom VPC
# vpc_id = "vpc-xxxxx"  # Uncomment and set if use_default_vpc = false
# subnet_ids = ["subnet-xxxxx", "subnet-yyyyy"]  # Uncomment if using specific subnets

# Security Configuration
# For production, restrict to your VPC CIDR or specific IP ranges
allowed_cidr_blocks = ["0.0.0.0/0"]
publicly_accessible = true  # Set to false for production

# Backup Configuration
backup_retention_period      = 7  # Days to retain automated backups (1-35)
preferred_backup_window      = "03:00-04:00"  # UTC
preferred_maintenance_window = "mon:04:00-mon:05:00"  # UTC

# Snapshot Configuration
skip_final_snapshot = false  # Create final snapshot on destroy
apply_immediately   = false  # Apply changes during maintenance window

# Encryption (optional)
# kms_key_id = "arn:aws:kms:us-east-1:123456789012:key/xxxxx"

# Monitoring
performance_insights_enabled = true

# Secrets Manager
secret_recovery_days = 7  # Days to retain deleted secrets (0-30)

# Tags
tags = {
  Project           = "Doktolib"
  QoveryProject     = "{{QOVERY_PROJECT_ID}}"
  QoveryEnvironment = "{{QOVERY_ENVIRONMENT_ID}}"
  ManagedBy         = "Terraform"
  CostCenter        = "Engineering"
}

# ========================================
# EXAMPLE CONFIGURATIONS
# ========================================

# Development/Testing Environment
# --------------------------------
# min_capacity = 0.5
# max_capacity = 1
# instance_count = 1
# backup_retention_period = 1
# skip_final_snapshot = true
# publicly_accessible = true
# Estimated cost: ~$50-80/month

# Production Environment
# ----------------------
# min_capacity = 1
# max_capacity = 8
# instance_count = 2
# backup_retention_period = 14
# skip_final_snapshot = false
# publicly_accessible = false
# allowed_cidr_blocks = ["10.0.0.0/8"]
# Estimated cost: ~$200-600/month

# High-Traffic Production
# -----------------------
# min_capacity = 2
# max_capacity = 16
# instance_count = 3
# backup_retention_period = 30
# Estimated cost: ~$500-2000/month
